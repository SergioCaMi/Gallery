<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/style.css">
    <title>
        <%= title %>
    </title>
</head>

<body>
    <header>
        <nav style="display: flex; justify-content: space-between; align-items: center;">
            <div class="logo-container">
                <i class="fas fa-camera-retro"></i>
                <span>Fototeca</span>
            </div>
            <ul>
                <li>
                    <button onclick="window.location.href='/'" title="Inicio" class="nav-button">
                        <i class="fas fa-home"></i>
                    </button>
                </li>
                <% if (user) { %>
                    <li>
                        <button onclick="window.location.href='/new-image'" title="Nueva imagen" class="nav-button">
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </li>
                <% } %>
                <li class="search-menu-container">
                    <button onclick="toggleSearch()" title="Buscar" class="nav-button search-toggle-btn">
                        <i class="fas fa-search"></i>
                    </button>
                    <!-- Menú desplegable de búsqueda -->
                    <div class="search-dropdown" id="searchDropdown">
                        <div class="search-dropdown-header">
                            <h4><i class="fas fa-filter"></i> Filtros</h4>
                        </div>
                        <div class="search-dropdown-body">
                            <div class="search-field-compact">
                                <label for="searchInput">
                                    <i class="fas fa-signature"></i> Nombre
                                </label>
                                <input type="text" id="searchInput" class="searchInput modern-input-compact" 
                                       placeholder="Buscar...">
                            </div>
                            <div class="search-field-compact">
                                <label for="dateInput">
                                    <i class="fas fa-calendar-alt"></i> Desde
                                </label>
                                <input type="date" id="dateInput" class="dateInput modern-input-compact">
                            </div>
                            <div class="search-field-compact">
                                <label for="dateInputEnd">
                                    <i class="fas fa-calendar-check"></i> Hasta
                                </label>
                                <input type="date" id="dateInputEnd" class="dateInputEnd modern-input-compact" 
                                       value="<%= new Date().toISOString().slice(0,10) %>">
                            </div>
                            <button onclick="clearSearch()" class="btn-clear-compact">
                                <i class="fas fa-redo"></i> Limpiar
                            </button>
                            <div class="search-results-count-compact" id="resultsCount"></div>
                        </div>
                    </div>
                </li>
                <% if (!user) { %>
                    <li>
                        <button onclick="window.location.href='/auth/google'" title="Iniciar sesión" class="nav-button login-btn">
                            <i class="fab fa-google"></i>
                            <span class="login-text">Login</span>
                        </button>
                    </li>
                <% } else { %>
                    <li>
                        <button onclick="window.location.href='/logout'" title="Cerrar sesión" class="nav-button user-btn">
                            <% if (user.photo && user.photo.trim() !== "") { %>
                                <img src="<%= user.photo %>" alt="Usuario" class="user-avatar">
                            <% } else { %>
                                <i class="fas fa-user-circle"></i>
                            <% } %>
                            <i class="fas fa-sign-out-alt logout-icon"></i>
                        </button>
                    </li>
                <% } %>
            </ul>
        </nav>
    </header>

    <% if (title !=="Home" ){ %>
        <h2 style="text-align: center; margin-top: 10px; color: #333;">
            <%= title %>
        </h2>
        <% }else{ %>
            <h1>
                <%= title %>
            </h1>
            <%} %>